# Smart Tree Backend - 生产环境配置模板
# 复制此文件为 .env 并填入实际值

# ============ 数据库配置 ============
# MySQL 示例（推荐生产环境使用）
DATABASE_URL=mysql+pymysql://smarttree:YOUR_DB_PASSWORD@localhost:3306/smart_tree?charset=utf8mb4

# PostgreSQL 示例
# DATABASE_URL=postgresql://smarttree:YOUR_DB_PASSWORD@localhost:5432/smart_tree

# ============ JWT 配置 ============
# 必须更换为强随机密钥！运行: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_TO_A_STRONG_RANDOM_KEY_AT_LEAST_32_CHARS

# Token 有效期（分钟），默认 7 天
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ============ 系统 LLM 配置（官方额度模式）============
# 阿里云 DashScope API Key
DASHSCOPE_API_KEY=sk-your-dashscope-api-key
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# ============ 积分系统配置 ============
# 新用户赠送积分
NEW_USER_BONUS_POINTS=2000
# 积分与人民币换算（1000 积分 = 1 元）
POINTS_PER_RMB=1000
# 积分账本签名密钥（可选，默认复用 JWT_SECRET）
# CREDITS_HMAC_SECRET=

# ============ CORS 配置 ============
# 生产环境：限制为你的域名
CORS_ORIGINS=["https://your-domain.com","https://www.your-domain.com"]
CORS_ALLOW_ORIGIN_REGEX=^https://(www\.)?your-domain\.com$

# ============ 安全配置 ============
# 是否允许用户配置内网 LLM 地址（生产环境应为 false）
ALLOW_PRIVATE_LLM_BASEURL=false

# ============ 可选配置 ============
# 服务监听地址
HOST=0.0.0.0
PORT=8000

# 自动创建表（首次部署设为 true）
AUTO_CREATE_TABLES=true
# 自动迁移 schema（补齐缺失字段）
AUTO_MIGRATE_SCHEMA=true

# 调试模式（生产环境应为 false）
DEBUG_DB_ERRORS=false

